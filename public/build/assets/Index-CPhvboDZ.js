import{u as _,r as u,j as e,M as C,U as h,h as o,y as a}from"./app-CgaCq9nv.js";import{M as E}from"./Modal-Dy4gzZ7R.js";import{A as T,i as c}from"./AuthenticatedLayout-DpS60fxf.js";import{T as D,V as f,M as F,Y as P,e as U,B as p,h as M,a as A}from"./index-y9wjzvP5.js";import{m as g}from"./proxy-DFKnN-q_.js";import"./dialog-DdyOhnd8.js";import"./portal-VLUVTb8O.js";import"./use-server-handoff-complete-w_54JMez.js";import"./index-DNvxNPgT.js";import"./transition-BiG8XUbH.js";import"./ApplicationLogo-Czs6layN.js";import"./index-9TwP4i1b.js";import"./iconBase-5kt8W0gk.js";function O({auth:d,users:x}){const{t:s}=_(),[t,y]=u.useState(null),[w,n]=u.useState(!1);u.useEffect(()=>{const r=new URLSearchParams(window.location.search),l=r.get("showUserDetails"),i=r.get("tempPassword");if(l&&i){const j=x.find(S=>S.id===parseInt(l));j&&(y({...j,current_password:i}),n(!0))}},[x]);const b=r=>{confirm(s("users.confirmDelete"))&&o.delete(route("admin.users.destroy",r),{onSuccess:()=>{a.success(s("users.deleteSuccess"))}})},m=r=>{navigator.clipboard.writeText(r),a.success(s("common.copied"))},N=r=>{o.post(route("admin.users.send-credentials",r),{},{onSuccess:()=>a.success(s("users.emailSent")),onError:()=>a.error(s("users.emailError"))})},v=r=>{o.post(route("admin.tickets.create-for-user",r),{subject:"Kullanıcı Bilgileri",message:`Kullanıcı bilgileri talep edildi.
Kullanıcı: ${t==null?void 0:t.name}
E-posta: ${t==null?void 0:t.email}`},{onSuccess:()=>a.success(s("tickets.created")),onError:()=>a.error(s("tickets.error"))})},k=r=>{o.post(route("admin.users.send-credentials",r),{},{onSuccess:()=>{a.success(s("users.credentialsSent")),n(!1),o.reload()},onError:()=>{a.error(s("users.credentialsError"))}})};return e.jsxs(T,{auth:{user:{id:d.user.id,name:d.user.name,email:d.user.email,roles:d.user.roles}},header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:s("users.title")}),children:[e.jsx(C,{title:s("users.title")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm dark:bg-gray-800 sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex justify-end",children:e.jsxs(h,{href:route("admin.users.create"),className:"inline-flex items-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-blue-700 focus:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 active:bg-blue-900",children:[e.jsx(D,{className:"mr-2"}),s("users.addNew")]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:s("users.name")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:s("users.email")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:s("users.role")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:s("users.createdAt")}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:s("users.actions")})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800",children:x.map(r=>{var l,i;return e.jsxs(g.tr,{initial:{opacity:0},animate:{opacity:1},whileHover:{backgroundColor:"rgba(0,0,0,0.05)"},className:"transition-colors duration-150 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:r.email}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:((l=r.roles[0])==null?void 0:l.name.charAt(0).toUpperCase())+((i=r.roles[0])==null?void 0:i.name.slice(1))||s("users.noRole")}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:new Date(r.created_at).toLocaleDateString()}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(c,{content:s("users.resetPassword"),children:e.jsx(h,{href:route("admin.users.reset-password-form",{user:r.id}),className:"text-yellow-600 transition-colors duration-150 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",preserveScroll:!0,children:e.jsx(f,{className:"h-5 w-5"})})}),e.jsx(c,{content:s("users.edit"),children:e.jsx(h,{href:route("admin.users.edit",r.id),className:"text-indigo-600 transition-colors duration-150 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(F,{className:"h-5 w-5"})})}),e.jsx(c,{content:s("users.delete"),children:e.jsx("button",{onClick:()=>b(r.id),className:"text-red-600 transition-colors duration-150 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(P,{className:"h-5 w-5"})})}),e.jsx(c,{content:s("users.viewDetails"),children:e.jsx("button",{onClick:()=>{y({...r,current_password:r.current_password}),n(!0)},className:"text-blue-600 transition-colors duration-150 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(U,{className:"h-5 w-5"})})})]})})]},r.id)})})]})})]})})})}),w&&t&&e.jsx(E,{show:w,onClose:()=>n(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"mb-6 text-2xl font-bold text-gray-900 dark:text-gray-100",children:s("users.userDetails")}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-gray-50 p-4 dark:bg-gray-700/50",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:s("users.name")}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-white p-2 dark:bg-gray-800",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("button",{onClick:()=>m(t.name),className:"ml-2 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700",children:e.jsx(p,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:s("users.email")}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-white p-2 dark:bg-gray-800",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:t.email}),e.jsx("button",{onClick:()=>m(t.email),className:"ml-2 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700",children:e.jsx(p,{className:"h-4 w-4"})})]})]})]})}),e.jsx("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-900/50 dark:bg-yellow-900/20",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:s("users.currentPassword")}),!t.has_encrypted_password&&e.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:s("users.noStoredPassword")})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-white p-2 dark:bg-gray-800",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono",children:t.current_password||s("users.notAvailable")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t.current_password&&e.jsx("button",{onClick:()=>t.current_password&&m(t.current_password),className:"ml-2 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700",title:s("common.copy"),children:e.jsx(p,{className:"h-4 w-4"})}),!t.current_password&&t.id&&e.jsx("button",{onClick:()=>k(t.id),className:"ml-2 rounded-full p-1 text-yellow-400 hover:bg-yellow-100 hover:text-yellow-600 dark:hover:bg-yellow-700",title:s("users.generateNewPassword"),children:e.jsx(f,{className:"h-4 w-4"})})]})]}),t.password_updated_at&&e.jsxs("p",{className:"mt-1 text-xs text-yellow-600 dark:text-yellow-400",children:[s("users.lastUpdated"),":"," ",new Date(t.password_updated_at).toLocaleString()]}),e.jsx("div",{className:"mt-2 text-xs text-yellow-600 dark:text-yellow-400",children:e.jsx("p",{children:s("users.passwordNote")})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N(t.id),className:"inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),s("users.sendEmail")]}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v(t.id),className:"inline-flex items-center rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),s("users.createTicket")]})]})]})]})})]})}export{O as default};
