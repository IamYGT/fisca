import{u as j,r as l,j as e,h as f,y as n}from"./app-CNMlmVvg.js";import{c as v,aa as N,B as k,N as _}from"./index-CJWvZLX-.js";import{G as S}from"./iconBase-Cyj80Zr6.js";import{m as C}from"./proxy-Bs2RKMmf.js";function u(i){return S({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.7538 10.5176c0 .6251-2.2379 1.1483-5.2381 1.2812l.0028.0007c-.0848.0064-.5233.0325-1.5012.0325-.7778 0-1.33-.0233-1.5237-.0325-3.0059-.1322-5.2495-.6555-5.2495-1.2819s2.2436-1.149 5.2495-1.2834v2.0442c.1965.0142.7594.0474 1.5372.0474.9334 0 1.4008-.0389 1.4849-.0466V9.2356c2.9994.1337 5.2381.657 5.2381 1.282zm5.19.5466L12.1248 22.389a.1803.1803 0 0 1-.2496 0L.0562 11.0635a.1781.1781 0 0 1-.0382-.2079l4.3762-9.1921a.1767.1767 0 0 1 .1626-.1026h14.8878a.1768.1768 0 0 1 .1612.1032l4.3762 9.1922a.1782.1782 0 0 1-.0382.2079zm-4.478-.4038c0-.8068-2.5515-1.4799-5.9473-1.6369V7.195h4.186V4.4055H6.3076V7.195h4.1852v1.8286c-3.4018.1562-5.9601.83-5.9601 1.6376 0 .8075 2.5583 1.4806 5.9601 1.6376v5.8618h3.025v-5.8639c3.394-.1563 5.948-.8295 5.948-1.6363z"},child:[]}]})(i)}const E=[{id:"trc20",name:"Tron (TRC20)",fee:"1",isDefault:!0}],V=({exchangeRate:i,onAmountChange:m,onProcessingChange:h})=>{const{t:s}=j(),[a,g]=l.useState({amount_usd:"",wallet_address:"",network:"trc20",type:"crypto_withdrawal",exchange_rate:i.toString()}),[t,w]=l.useState({}),[d,x]=l.useState(!1);l.useEffect(()=>{m(a.amount_usd)},[a.amount_usd,m]),l.useEffect(()=>{h(d)},[d,h]);const y=r=>{r.preventDefault(),x(!0),f.post(route("withdrawal.store"),{...a,type:"crypto_withdrawal",exchange_rate:i.toString()},{preserveScroll:!0,onSuccess:()=>{x(!1),n.success(s("withdrawal.success"))},onError:c=>{x(!1),w(c),n.error(s("withdrawal.error"))}})},o=(r,c)=>{g(b=>({...b,[r]:c})),r==="amount_usd"&&m(c)},p=async()=>{try{const r=await navigator.clipboard.readText();o("wallet_address",r),n.success(s("withdrawal.crypto.addressPasted"))}catch{n.error(s("withdrawal.crypto.pasteError"))}};return e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"overflow-hidden rounded-xl bg-white shadow-sm dark:bg-gray-800",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:s("withdrawal.crypto.amount")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(v,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"1",value:a.amount_usd,onChange:r=>o("amount_usd",r.target.value),className:"block w-full rounded-lg border-gray-300 pl-10 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700",required:!0})]}),t.amount_usd&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.amount_usd})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:s("withdrawal.crypto.network")}),e.jsx("div",{className:"space-y-3",children:E.map(r=>e.jsx("div",{className:`cursor-pointer rounded-lg border p-4 transition-colors ${a.network===r.id?"border-indigo-500 bg-indigo-50 dark:border-indigo-400 dark:bg-indigo-900/20":"border-gray-200 hover:border-indigo-200 dark:border-gray-700 dark:hover:border-indigo-700"}`,onClick:()=>o("network",r.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{className:"h-6 w-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s("withdrawal.crypto.fee"),": $",r.fee," USDT"]})]})]}),e.jsx("div",{className:`h-4 w-4 rounded-full border ${a.network===r.id?"border-indigo-500 bg-indigo-500":"border-gray-300"}`})]})},r.id))}),t.network&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.network})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:s("withdrawal.crypto.walletAddress")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(N,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:a.wallet_address,onChange:r=>o("wallet_address",r.target.value),className:"block w-full rounded-lg border-gray-300 pl-10 pr-20 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700",placeholder:s("withdrawal.crypto.walletPlaceholder"),required:!0}),e.jsxs("button",{type:"button",onClick:p,className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700",children:[e.jsx(k,{className:"mr-1 h-4 w-4"}),s("common.paste")]})]}),t.wallet_address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.wallet_address})]}),e.jsx("div",{className:"rounded-lg bg-yellow-50 p-4 dark:bg-yellow-900/20",children:e.jsxs("div",{className:"flex",children:[e.jsx(_,{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-yellow-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:s("withdrawal.crypto.warning.title")}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:e.jsxs("ul",{className:"list-inside list-disc space-y-1",children:[e.jsx("li",{children:s("withdrawal.crypto.warning.network")}),e.jsx("li",{children:s("withdrawal.crypto.warning.address")}),e.jsx("li",{children:s("withdrawal.crypto.warning.fee")})]})})]})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:d,className:"inline-flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 disabled:opacity-50",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s("common.processing")]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),s("withdrawal.crypto.submit")]})})})]})})})};export{V as CryptoWithdrawalForm};
