import{u as C,r as F,a as S,j as e,M as T,U as u,y as n}from"./app-CgaCq9nv.js";import{A as D}from"./AuthenticatedLayout-DpS60fxf.js";import{z as A,c as p,A as b,B as m,C as U,D as I,E,p as j,w as $,G as M,H as R}from"./index-y9wjzvP5.js";import"./ApplicationLogo-Czs6layN.js";import"./index-9TwP4i1b.js";import"./proxy-DFKnN-q_.js";import"./iconBase-5kt8W0gk.js";import"./index-DNvxNPgT.js";function q({auth:l,transaction:r,statuses:o}){var h;const{t:a}=C(),[f,x]=F.useState(!1),{data:d,setData:i,put:v,processing:g,errors:c}=S({status:r.status,notes:r.notes||"",processed_at:r.processed_at,crypto_txid:r.crypto_txid}),k=s=>{if(s.preventDefault(),N()){x(!0);return}y()},y=()=>{d.status==="completed"&&!d.processed_at&&i("processed_at",new Date().toISOString()),v(route("admin.transactions.update",r.id),{onSuccess:()=>{n.success(a("transaction.statusUpdated"))},onError:()=>{n.error(a("common.error"))}})},N=()=>(d.status==="cancelled"||d.status==="rejected")&&r.status==="pending",w=s=>{i("status",s)},_=()=>r.type!=="crypto_withdrawal"?null:e.jsx("div",{className:"space-y-4 mt-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("transaction.cryptoTxid")}),e.jsx("input",{type:"text",value:d.crypto_txid||"",onChange:s=>i("crypto_txid",s.target.value),className:"focus:border-primary-500 focus:ring-primary-500 w-full rounded-lg border-gray-300 shadow-sm dark:border-gray-600 dark:bg-gray-700/50",placeholder:a("transaction.cryptoTxidPlaceholder")})]})});return e.jsxs(D,{auth:l,header:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"flex items-center text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[e.jsx("span",{className:"mr-2",children:a("transaction.edit")}),e.jsx("span",{className:"rounded-full bg-gray-100 px-3 py-1 text-sm dark:bg-gray-700",children:r.reference_id})]})}),children:[e.jsx(T,{title:`${a("transaction.edit")} - ${r.reference_id}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between rounded-xl bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(u,{href:route("admin.transactions.show",r.id),className:"flex items-center rounded-lg bg-gray-100 px-3 py-2 text-gray-600 transition-all duration-200 hover:text-gray-900 hover:shadow-md dark:bg-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),a("common.back")]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a("transaction.edit")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("transaction.editDescription")})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("span",{className:"rounded-lg bg-gray-100 px-4 py-2 text-sm text-gray-600 dark:bg-gray-700 dark:text-gray-300",children:["ID: ",r.reference_id]})})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-lg dark:border-gray-700 dark:bg-gray-800",children:e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-12 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a("transaction.details")}),e.jsx("span",{className:`inline-flex items-center rounded-lg px-3 py-1.5 text-sm font-medium ${B(r.type)}`,children:a(`transaction.${r.type}`)})]}),e.jsxs("div",{className:"space-y-6 rounded-xl bg-gray-50 p-6 dark:bg-gray-700/30",children:[e.jsx(t,{label:a("transaction.user"),value:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/50 flex h-10 w-10 items-center justify-center rounded-full",children:e.jsx("span",{className:"text-primary-700 dark:text-primary-300 font-medium",children:r.user.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.user.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.user.email})]})]})}),e.jsx(t,{icon:e.jsx(p,{}),label:a("transaction.amount"),value:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(r.amount_usd))}),e.jsx("div",{className:"text-sm text-gray-500",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(parseFloat(r.amount))}),r.exchange_rate&&e.jsxs("div",{className:"text-xs text-gray-400",children:[a("transaction.exchangeRate"),": ",Number(r.exchange_rate).toFixed(4)]})]})}),r.type==="bank_withdrawal"?e.jsxs(e.Fragment,{children:[e.jsx(t,{icon:e.jsx(b,{}),label:a("transaction.bankAccount"),value:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:r.bank_account}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.bank_account),n.success(a("common.copied"))},className:"p-1 text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(m,{className:"h-4 w-4"})})]})}),r.bank_id&&e.jsx(t,{icon:e.jsx(b,{}),label:a("transaction.bank"),value:r.bank_id})]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{icon:e.jsx(U,{}),label:a("transaction.cryptoAddress"),value:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:r.crypto_address}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.crypto_address),n.success(a("common.copied"))},className:"p-1 text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(m,{className:"h-4 w-4"})})]})}),e.jsx(t,{icon:e.jsx(I,{}),label:a("transaction.cryptoNetwork"),value:(h=r.crypto_network)==null?void 0:h.toUpperCase()}),r.crypto_fee&&e.jsx(t,{icon:e.jsx(p,{}),label:a("transaction.cryptoFee"),value:`${r.crypto_fee} USDT`})]}),e.jsx(t,{icon:e.jsx(E,{}),label:a("transaction.referenceId"),value:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:r.reference_id}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.reference_id),n.success(a("common.copied"))},className:"p-1 text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(m,{className:"h-4 w-4"})})]})})]})]}),e.jsxs("form",{onSubmit:k,className:"rounded-xl bg-gray-50 p-8 dark:bg-gray-700/30",children:[e.jsx("h3",{className:"mb-6 text-xl font-bold text-gray-900 dark:text-gray-100",children:a("transaction.updateStatus")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("transaction.status")}),e.jsx("select",{value:d.status,onChange:s=>w(s.target.value),className:"focus:border-primary-500 focus:ring-primary-500 w-full rounded-lg border-gray-300 shadow-sm dark:border-gray-600 dark:bg-gray-700/50",children:o.map(s=>e.jsx("option",{value:s,children:a(`status.${s}`)},s))}),c.status&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:c.status})]}),_(),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("transaction.notes")}),e.jsx("textarea",{value:d.notes,onChange:s=>i("notes",s.target.value),rows:4,className:"focus:border-primary-500 focus:ring-primary-500 w-full rounded-lg border-gray-300 shadow-sm dark:border-gray-600 dark:bg-gray-700/50",placeholder:a("transaction.notesPlaceholder")}),c.notes&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:c.notes})]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsxs(u,{href:route("admin.transactions.show",r.id),className:"group inline-flex items-center rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-50 hover:text-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white",children:[e.jsx(j,{className:"mr-2 h-4 w-4 transition-transform group-hover:scale-110"}),a("common.cancel")]}),e.jsxs("button",{type:"submit",disabled:g,className:"group inline-flex items-center rounded-lg bg-primary-600 px-5 py-2.5 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:bg-primary-700 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50",children:[g?e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(M,{className:"mr-2 h-4 w-4 transition-transform group-hover:scale-110"}),a("common.save")]})]})]})]})]})})})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-4 w-full max-w-md rounded-xl bg-white p-8 shadow-xl dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-gray-900 dark:text-gray-100",children:a("transaction.confirmCancel")}),e.jsx("p",{className:"mb-8 text-gray-600 dark:text-gray-400",children:a("transaction.confirmCancelMessage")}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsxs("button",{onClick:()=>x(!1),className:"group inline-flex items-center rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-50 hover:text-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white",children:[e.jsx(j,{className:"mr-2 h-4 w-4 transition-transform group-hover:scale-110"}),a("common.no")]}),e.jsxs("button",{onClick:()=>{x(!1),y()},className:"group inline-flex items-center rounded-lg bg-red-500 px-5 py-2.5 text-sm font-medium text-white shadow-md transition-all duration-200 hover:bg-red-600 hover:shadow-lg dark:bg-red-600 dark:hover:bg-red-700",children:[e.jsx(R,{className:"mr-2 h-4 w-4 transition-transform group-hover:scale-110"}),a("common.yes")]})]})]})})]})}const t=({icon:l,label:r,value:o})=>e.jsxs("div",{children:[e.jsxs("dt",{className:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",children:[l&&e.jsx("span",{className:"mr-2 flex h-5 w-5 items-center justify-center",children:l}),r]}),e.jsx("dd",{className:"mt-1 text-sm",children:o})]}),B=l=>{switch(l){case"bank_withdrawal":return"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300";case"crypto_withdrawal":return"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300"}};export{q as default};
