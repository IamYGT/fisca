import{u as U,r as l,a as B,j as e,M as I,h as C,U as R}from"./app-CzQgzLDV.js";import{A as M}from"./AuthenticatedLayout-DK_-UJtt.js";import{a as D,i as z,j as H,k as q,l as G,m as J,e as K}from"./index-DnFmWr2M.js";import{d as O,P as Q}from"./debounce-CfqACsXP.js";import{A as V}from"./index-BdO7F12x.js";import{m as W}from"./proxy-CgUF6eMH.js";import"./ApplicationLogo-tpEwtBlH.js";import"./iconBase-aArZRAXf.js";import"./index-C7UQo0Vh.js";const y=({title:a,value:i,icon:p,color:b,textColor:j,onClick:g})=>e.jsx("div",{className:`${b} rounded-2xl shadow-sm p-6 ${j} ${g?"cursor-pointer hover:opacity-90 transition-opacity":""}`,onClick:g,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:a}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:i})]}),e.jsx("div",{className:"p-3 bg-white/10 rounded-xl",children:e.jsx(p,{className:"w-6 h-6"})})]})});function oe({auth:a,tickets:i,filters:p={},statuses:b,priorities:j,categories:g,stats:m}){const{t:r}=U(),[h,S]=l.useState(!1),[F,f]=l.useState(!1),[k,A]=l.useState(!0),v={search:"",status:"",priority:"",category:"",sort:"",direction:"asc",page:"1"},{data:s,setData:d,reset:E}=B({...v,...p}),[c,P]=l.useState({column:s.sort||"",direction:s.direction||"asc"}),w=()=>{E(),C.get(route("admin.tickets.index"),v)},u=t=>{C.get(route("admin.tickets.index"),{...t,page:"1"},{preserveState:!0,preserveScroll:!1,onBefore:()=>f(!0),onFinish:()=>{f(!1),S(!1)},onError:()=>{f(!1),w()}})},_=l.useCallback(O(t=>{if(!k){const n={...s,search:t,page:"1"};d(n),u(n)}},300),[s,k]);l.useEffect(()=>{k||u(s)},[s.status,s.priority,s.category]);const L=l.useCallback(t=>{const n=c.column===t&&c.direction==="asc"?"desc":"asc";P({column:t,direction:n});const $={...s,sort:t,direction:n,page:"1"};d($),u($)},[c,s]),N=(t,n)=>{const o={...v,[t]:n,page:"1"};d(o),u(o)},x=({column:t,children:n})=>{const o=c.column===t;return e.jsx("th",{scope:"col",className:`px-6 py-4 text-left text-xs font-medium tracking-wider whitespace-nowrap cursor-pointer transition-colors
                    ${o?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,onClick:()=>L(t),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:n}),o&&e.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:c.direction==="asc"?"↑":"↓"})]})})};return l.useEffect(()=>{A(!1)},[]),e.jsxs(M,{auth:a,children:[e.jsx(I,{title:r("admin.tickets")}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(y,{title:r("stats.totalTickets"),value:m.total,icon:D,color:"bg-gradient-to-br from-indigo-500 to-purple-600",textColor:"text-white",onClick:w}),e.jsx(y,{title:r("stats.openTickets"),value:m.open,icon:z,color:"bg-gradient-to-br from-amber-500 to-orange-600",textColor:"text-white",onClick:()=>N("status","open")}),e.jsx(y,{title:r("stats.answeredTickets"),value:m.answered,icon:H,color:"bg-gradient-to-br from-emerald-500 to-teal-600",textColor:"text-white",onClick:()=>N("status","answered")}),e.jsx(y,{title:r("stats.highPriority"),value:m.high_priority,icon:q,color:"bg-gradient-to-br from-rose-500 to-red-600",textColor:"text-white",onClick:()=>N("priority","high")})]}),i.data.length===0&&!F&&e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl shadow-sm",children:[e.jsx(D,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-600"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:r("ticket.noTickets")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r("ticket.noTicketsDescription")}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:w,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:r("common.resetFilters")})})]}),F&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm overflow-hidden border border-gray-200/50 dark:border-gray-700/50",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:r("admin.tickets")}),e.jsxs("div",{className:"relative max-w-md",children:[e.jsx("input",{type:"text",placeholder:r("common.search"),className:"w-full pl-12 pr-4 py-3 rounded-xl border-0 ring-1 ring-gray-200 dark:ring-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition-shadow duration-150",value:s.search,onChange:t=>{d("search",t.target.value),_(t.target.value)}}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(G,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>S(!h),className:`inline-flex items-center px-5 py-3 rounded-xl text-sm font-medium transition-all duration-150
                                            ${h?"bg-indigo-500 text-white hover:bg-indigo-600":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx(J,{className:`w-4 h-4 mr-2 ${h?"text-white":"text-gray-500 dark:text-gray-400"}`}),r("common.filters")]})})]}),e.jsx(V,{children:h&&e.jsx(W.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"mt-6",children:e.jsx("div",{className:"p-6 bg-gradient-to-b from-gray-50 to-white dark:from-gray-800 dark:to-gray-750 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("ticket.status")}),e.jsxs("select",{value:s.status,onChange:t=>d("status",t.target.value),className:"w-full py-3 pl-4 pr-10 rounded-xl border-0 ring-1 ring-gray-200 dark:ring-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400",children:[e.jsx("option",{value:"",children:r("ticket.allStatuses")}),b.map(t=>e.jsx("option",{value:t,children:r(`ticket.status.${t}`)},t))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("ticket.priority")}),e.jsxs("select",{value:s.priority,onChange:t=>d("priority",t.target.value),className:"w-full py-3 pl-4 pr-10 rounded-xl border-0 ring-1 ring-gray-200 dark:ring-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400",children:[e.jsx("option",{value:"",children:r("ticket.allPriorities")}),j.map(t=>e.jsx("option",{value:t,children:r(`ticket.priority.${t}`)},t))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("ticket.category")}),e.jsxs("select",{value:s.category,onChange:t=>d("category",t.target.value),className:"w-full py-3 pl-4 pr-10 rounded-xl border-0 ring-1 ring-gray-200 dark:ring-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400",children:[e.jsx("option",{value:"",children:r("ticket.allCategories")}),g.map(t=>e.jsx("option",{value:t,children:r(`ticket.category.${t}`)},t))]})]})]})})})})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsx(x,{column:"subject",children:r("ticket.subject")}),e.jsx(x,{column:"user",children:r("ticket.user")}),e.jsx(x,{column:"priority",children:r("ticket.priority")}),e.jsx(x,{column:"status",children:r("ticket.status")}),e.jsx(x,{column:"last_reply_at",children:r("ticket.lastReply")}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap",children:r("common.actions")})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.data.map((t,n)=>e.jsxs("tr",{className:`group hover:bg-gray-50/50 dark:hover:bg-gray-700/50 transition-colors duration-150 ${n%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/30 dark:bg-gray-800/30"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 group relative",title:t.subject,children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("span",{className:"cursor-help",children:T(t.subject,60)})}),e.jsx("div",{className:"md:hidden",children:e.jsx("span",{className:"cursor-help",children:T(t.subject,30)})}),e.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg py-2 px-3 -top-10 left-1/2 transform -translate-x-1/2 w-auto max-w-xs",children:[t.subject,e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900 dark:bg-gray-700"})]})]}),e.jsxs("div",{className:"md:hidden mt-1 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:t.user.name.charAt(0).toUpperCase()})}),e.jsx("span",{className:"truncate max-w-[120px]",children:t.user.name})]})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:t.user.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400",onClick:()=>{d("search",t.user.name),C.get(route("admin.tickets.index",{search:t.user.name}))},children:t.user.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[200px]",children:t.user.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(X,{priority:t.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(Y,{status:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500 dark:text-gray-400 hidden lg:table-cell",children:Z(t.last_reply_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsx("div",{className:"flex items-center justify-end space-x-3",children:e.jsx(R,{href:route("admin.tickets.show",t.id),className:"p-2 text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors duration-150 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(K,{className:"w-5 h-5"})})})})]},t.id))})]})})}),e.jsx("div",{className:"sticky bottom-0 p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:e.jsx(Q,{links:i.links})})]})]})]})})]})}const X=({priority:a})=>{const i={low:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",high:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i[a]}`,children:a})},Y=({status:a})=>{const i={open:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",answered:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",closed:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i[a]}`,children:a})},Z=a=>new Date(a).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=(a,i)=>a.length<=i?a:a.substring(0,i)+"...";export{oe as default};
