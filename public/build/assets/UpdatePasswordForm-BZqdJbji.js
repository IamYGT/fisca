import{r as s,u as D,a as H,j as e,y as R}from"./app-CzQgzLDV.js";import{I as g}from"./InputError-Ecup3wiP.js";import{I as v,T as j}from"./TextInput-DkcNbhv7.js";import{P as W}from"./PrimaryButton-BCkndqVU.js";import{z as U}from"./transition-5j1SdwJP.js";import"./use-server-handoff-complete-CR0MK-dB.js";function X({title:o,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),o?s.createElement("title",{id:t},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const b=s.forwardRef(X);function G({title:o,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),o?s.createElement("title",{id:t},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const y=s.forwardRef(G);function J({title:o,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),o?s.createElement("title",{id:t},o):null,s.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const K=s.forwardRef(J);function Q({title:o,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),o?s.createElement("title",{id:t},o):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const V=s.forwardRef(Q);function oe({className:o="",socialLogin:t=!1}){const{t:r}=D(),n=s.useRef(null),_=s.useRef(null),[m,S]=s.useState(!1),[p,L]=s.useState(!1),[w,F]=s.useState(!1),[d,M]=s.useState({minLength:!1,hasNumber:!1,hasSpecial:!1,hasLetter:!1}),[h,O]=s.useState(!1),{data:l,setData:f,errors:i,put:I,reset:x,processing:N,recentlySuccessful:B}=H({current_password:"",password:"",password_confirmation:""}),Z=a=>{M({minLength:a.length>=8,hasNumber:/\d/.test(a),hasSpecial:/[!@#$%^&*(),.?":{}|<>]/.test(a),hasLetter:/[a-zA-Z]/.test(a)})};s.useEffect(()=>{O(l.password===l.password_confirmation&&l.password.length>0&&l.password_confirmation.length>0)},[l.password,l.password_confirmation]);const C=Object.values(d).every(a=>a),k=()=>t?!C||!h||N:!C||!h||!l.current_password||N,$=a=>{a.preventDefault(),I(route("password.update"),{preserveScroll:!0,onSuccess:()=>{x(),R.success(r("password_updated_successfully"),{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,onClose:()=>{setTimeout(()=>{window.location.reload()},100)}})},onError:c=>{var P,E;R.error(r("password_update_error"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),c.password&&(x("password","password_confirmation"),(P=n.current)==null||P.focus()),c.current_password&&(x("current_password"),(E=_.current)==null||E.focus())}})},q=a=>{const c=a.target.value;f("password",c),Z(c)},T=a=>{f("password_confirmation",a.target.value)},u=(a,c)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[a?e.jsx(K,{className:"h-5 w-5 text-green-500"}):e.jsx(V,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:`text-sm ${a?"text-green-600":"text-red-600"}`,children:c})]}),[z,A]=s.useState(!1);return e.jsxs("section",{className:`${o} p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm`,children:[e.jsx("header",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("ensure_long_password")})}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[!t&&e.jsxs("div",{children:[e.jsx(v,{htmlFor:"current_password",value:r("current_password")}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(j,{id:"current_password",ref:_,value:l.current_password,onChange:a=>f("current_password",a.target.value),type:m?"text":"password",className:"block w-full pr-10",autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>S(!m),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:m?e.jsx(b,{className:"h-5 w-5 text-gray-500"}):e.jsx(y,{className:"h-5 w-5 text-gray-500"})})]}),e.jsx(g,{message:i.current_password?r(i.current_password):"",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"password",value:r("new_password")}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(j,{id:"password",ref:n,value:l.password,onChange:q,onFocus:()=>A(!0),type:p?"text":"password",className:"block w-full pr-10",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>L(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:p?e.jsx(b,{className:"h-5 w-5 text-gray-500"}):e.jsx(y,{className:"h-5 w-5 text-gray-500"})})]}),e.jsx(g,{message:i.password?r(i.password):"",className:"mt-1"}),z&&e.jsxs("div",{className:"mt-2 space-y-1",children:[u(d.minLength,r("password_min_length_6")),u(d.hasLetter,r("password_letter")),u(d.hasNumber,r("password_number")),u(d.hasSpecial,r("password_special")),u(h,r("passwords_match"))]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"password_confirmation",value:r("confirm_password")}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(j,{id:"password_confirmation",value:l.password_confirmation,onChange:T,type:w?"text":"password",className:"block w-full pr-10",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>F(!w),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:w?e.jsx(b,{className:"h-5 w-5 text-gray-500"}):e.jsx(y,{className:"h-5 w-5 text-gray-500"})})]}),e.jsx(g,{message:i.password_confirmation?r(i.password_confirmation):"",className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[e.jsx(W,{disabled:k(),className:`px-3 py-1.5 ${k()?"opacity-50 cursor-not-allowed":"hover:bg-indigo-500"}`,children:r("save")}),e.jsx(U,{show:B,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r("saved")})})]})]})]})}export{oe as default};
