import{u as j,r as c,j as e,M as T,U as _,y as w,h as E}from"./app-CNMlmVvg.js";import{A as D}from"./AuthenticatedLayout-COLO9gVE.js";import{p as v}from"./format-DFwJEbyI.js";import{c as N,i as k,j as C,l as L,f as I,N as F,a4 as $,e as B,a5 as S,O as M,a6 as O,C as U}from"./index-CJWvZLX-.js";import{m as x}from"./proxy-Bs2RKMmf.js";import{z as y}from"./transition-Dmm_GqZM.js";import{y as f}from"./dialog-CE2BwF-P.js";import"./ApplicationLogo-BLXO_E4I.js";import"./index-D-9bM9oj.js";import"./iconBase-Cyj80Zr6.js";import"./index-CunF7zry.js";import"./use-server-handoff-complete-Dx_XkveX.js";import"./portal-CUWHgd5s.js";const H=({isOpen:s,closeModal:a,onConfirm:o,transactionId:t})=>{const{t:n}=j();return c.useEffect(()=>{const d=i=>{i.key==="Escape"&&a()};return s&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[s,a]),e.jsx(y,{appear:!0,show:s,as:c.Fragment,children:e.jsxs(f,{as:"div",className:"relative z-[60]",onClose:a,children:[e.jsx(y.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(y.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(f.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all dark:bg-gray-800",children:[e.jsxs(f.Title,{as:"h3",className:"flex items-center space-x-2 text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",children:[e.jsx(S,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{children:n("transaction.cancelTitle")})]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("transaction.cancelConfirmMessage",{id:t})})}),e.jsxs("div",{className:"mt-4 flex space-x-3",children:[e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-500 px-4 py-2 text-sm font-medium text-white hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:o,children:n("common.confirm")}),e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",onClick:a,children:n("common.cancel")})]})]})})})})]})})},R=({transaction:s})=>{const{t:a}=j(),[o,t]=c.useState(!1),n=l=>{switch(l){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";case"cancelled":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"}},d=l=>{switch(l){case"completed":return e.jsx(C,{className:"h-5 w-5"});case"pending":case"waiting":return e.jsx(k,{className:"h-5 w-5"});case"rejected":return e.jsx(M,{className:"h-5 w-5"});default:return e.jsx(F,{className:"h-5 w-5"})}},i=(l,b)=>l==="bank_withdrawal"?e.jsx(O,{className:"h-5 w-5 text-blue-500"}):l==="crypto_withdrawal"?e.jsx(U,{className:"h-5 w-5 text-orange-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"}),u=()=>{E.post(route("transactions.cancel",{transaction:s.id}),{},{onSuccess:()=>{t(!1),window.location.reload()},onError:()=>{t(!1),w.error(a("transaction.cancelError"),{theme:document.documentElement.classList.contains("dark")?"dark":"light",position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,style:{zIndex:50}})}})};return e.jsxs(e.Fragment,{children:[e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"overflow-hidden rounded-xl bg-white shadow-sm transition-colors duration-200 hover:shadow-md dark:bg-gray-800",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-3 dark:bg-gray-700",children:i(s.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:a(`transaction.type.${s.type}`)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(s.created_at).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[e.jsx($,{className:"mr-1 inline h-4 w-4"}),v(s.amount_usd).toFixed(2)]})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`inline-flex items-center space-x-1 rounded-full px-3 py-1 text-sm font-medium ${n(s.status)}`,children:[d(s.status),e.jsx("span",{children:a(`status.${s.status}`)})]}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["#",s.reference_id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(_,{href:route("transactions.show",s.id),className:"inline-flex items-center space-x-2 rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200 hover:bg-gray-200 hover:shadow-sm dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:a("common.details")})]}),["pending","waiting"].includes(s.status)&&e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center space-x-2 rounded-lg bg-red-500 px-4 py-2 text-sm font-medium text-white transition-all duration-200 hover:bg-red-600 hover:shadow-sm dark:bg-red-600 dark:text-white dark:hover:bg-red-700",children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{children:a("common.cancel")})]})]})]})]})}),e.jsx(H,{isOpen:o,closeModal:()=>t(!1),onConfirm:u,transactionId:s.reference_id})]})};function ee({auth:s,transactions:a,stats:o}){const{t}=j(),[n,d]=c.useState(""),[i,u]=c.useState("all"),l=a.data.filter(r=>{const g=r.reference_id.toLowerCase().includes(n.toLowerCase())||r.amount_usd.toString().includes(n),h=i==="all"||r.status===i||r.type===i;return g&&h}),b=()=>{const g=[[t("transaction.date"),t("transaction.type"),t("transaction.amountUSD"),t("transaction.status"),t("transaction.referenceId")].join(","),...l.map(m=>[new Date(m.created_at).toLocaleDateString(),t(`transaction.type.${m.type}`),m.amount_usd,t(`status.${m.status}`),m.reference_id].join(","))].join(`
`),h=new Blob([g],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(h),p.download=`transactions_${new Date().toISOString().split("T")[0]}.csv`,p.click(),w.success(t("transaction.exported"))};return e.jsxs(D,{auth:{user:{...s.user,roles:s.user.roles||[]}},header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:t("transaction.history")}),children:[e.jsx(T,{title:t("transaction.history")}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(x.div,{whileHover:{scale:1.02},className:"rounded-xl bg-gradient-to-br from-green-50 to-green-100 p-6 dark:from-green-900/30 dark:to-green-800/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:t("transaction.totalAmountUSD")}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-green-700 dark:text-green-300",children:["$",v(o.total_amount_usd).toFixed(2)]})]}),e.jsx(N,{className:"h-12 w-12 text-green-500/50"})]})}),e.jsx(x.div,{whileHover:{scale:1.02},className:"rounded-xl bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 dark:from-yellow-900/30 dark:to-yellow-800/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:t("transaction.pendingCount")}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-yellow-700 dark:text-yellow-300",children:o.pending_count})]}),e.jsx(k,{className:"h-12 w-12 text-yellow-500/50"})]})}),e.jsx(x.div,{whileHover:{scale:1.02},className:"rounded-xl bg-gradient-to-br from-purple-50 to-purple-100 p-6 dark:from-purple-900/30 dark:to-purple-800/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:t("transaction.completedCount")}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-purple-700 dark:text-purple-300",children:o.completed_count})]}),e.jsx(C,{className:"h-12 w-12 text-purple-500/50"})]})})]}),e.jsxs("div",{className:"mb-6 flex flex-col gap-4 rounded-xl bg-white p-4 shadow-sm dark:bg-gray-800 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:n,onChange:r=>d(r.target.value),placeholder:t("transaction.searchPlaceholder"),className:"w-full rounded-lg border-gray-300 pl-10 pr-4 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700"}),e.jsx(L,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"})]}),e.jsxs("select",{value:i,onChange:r=>u(r.target.value),className:"rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("option",{value:"all",children:t("common.all")}),e.jsxs("optgroup",{label:t("transaction.statusGroup"),children:[e.jsx("option",{value:"pending",children:t("status.pending")}),e.jsx("option",{value:"cancelled",children:t("status.cancelled")}),e.jsx("option",{value:"completed",children:t("status.completed")}),e.jsx("option",{value:"rejected",children:t("status.rejected")})]}),e.jsxs("optgroup",{label:t("transaction.accountGroup"),children:[e.jsx("option",{value:"crypto_withdrawal",children:t("transaction.type.crypto")}),e.jsx("option",{value:"bank_withdrawal",children:t("transaction.type.bank")})]})]})]}),e.jsxs("button",{onClick:b,className:"inline-flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),t("common.export")]})]}),e.jsx("div",{className:"space-y-4",children:l.length>0?l.map(r=>e.jsx(R,{transaction:r},r.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-xl bg-white py-12 text-center dark:bg-gray-800",children:[e.jsx(F,{className:"mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:t("transaction.noResults")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("transaction.tryDifferentSearch")})]})})]})})]})}export{ee as default};
