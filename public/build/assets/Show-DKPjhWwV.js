import{u as F,j as e,M as C,U as x,y as o}from"./app-CzQgzLDV.js";import{A as D}from"./AuthenticatedLayout-DK_-UJtt.js";import{z as T,M as h,g as u,c as m,A as p,B as g,E as S,Q as y,q as j,R as A,C as R,D as U,S as $,N as H,O as b,i as I,j as M}from"./index-DnFmWr2M.js";import{m as d}from"./proxy-CgUF6eMH.js";import"./ApplicationLogo-tpEwtBlH.js";import"./index-BdO7F12x.js";import"./iconBase-aArZRAXf.js";import"./index-C7UQo0Vh.js";function Y({auth:l,transaction:a}){const{t:s}=F(),c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},N={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},v=()=>{try{if(!a.history)return[];const r=JSON.parse(a.history);return Array.isArray(r)?r:[]}catch{return[]}},f=r=>{if(r.messageKey){let i=s(r.messageKey);return r.params&&Object.entries(r.params).forEach(([n,_])=>{i=i.replace(`:${n}`,_)}),i}return r.note||""},k=()=>{const r=v();return r.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:s("transaction.noHistory")}):r.map((i,n)=>e.jsxs("div",{className:"relative flex items-start pl-8",children:[e.jsx("div",{className:`absolute left-0 flex h-8 w-8 items-center justify-center rounded-full
                    ${i.type==="status_change"?"bg-blue-100 dark:bg-blue-900/20":i.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/20":"bg-gray-100 dark:bg-gray-700/50"}`,children:e.jsx(j,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1 rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:f(i)}),e.jsx("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:e.jsx("span",{children:new Date(i.timestamp||i.date||"").toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})})]})]},n))},w=()=>{var r;return a.type!=="crypto_withdrawal"?null:e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{icon:e.jsx(R,{}),label:s("transaction.cryptoAddress"),value:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:a.crypto_address}),a.crypto_address&&e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(a.crypto_address),o.success(s("common.copied"))},className:"p-1 text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(g,{className:"h-4 w-4"})})]})}),e.jsx(t,{icon:e.jsx(U,{}),label:s("transaction.cryptoNetwork"),value:(r=a.crypto_network)==null?void 0:r.toUpperCase()}),a.crypto_fee&&e.jsx(t,{icon:e.jsx(m,{}),label:s("transaction.cryptoFee"),value:`${a.crypto_fee} USDT`}),a.crypto_txid&&e.jsx(t,{icon:e.jsx($,{}),label:s("transaction.cryptoTxid"),value:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:a.crypto_txid}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(a.crypto_txid),o.success(s("common.copied"))},className:"p-1 text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(g,{className:"h-4 w-4"})})]})})]})};return e.jsxs(D,{auth:{user:{...l.user,roles:l.user.roles||[]}},children:[e.jsx(C,{title:`${s("transaction.details")} - ${a.reference_id}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs(d.div,{initial:"hidden",animate:"visible",variants:N,className:"space-y-6",children:[e.jsx(d.div,{variants:c,className:"rounded-xl bg-white p-4 shadow-sm dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(x,{href:route("admin.transactions.index"),className:"flex items-center rounded-lg bg-gray-100 px-3 py-2 text-gray-600 transition-all duration-200 hover:text-gray-900 hover:shadow-md dark:bg-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),s("common.back")]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s("transaction.details")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("transaction.viewDescription")})]})]}),e.jsxs(x,{href:route("admin.transactions.edit",a.id),className:"group inline-flex items-center rounded-lg bg-primary-600 px-4 py-2.5 font-medium text-white shadow-sm transition-all duration-200 hover:bg-primary-700 hover:shadow-md",children:[e.jsx(h,{className:"mr-2 h-4 w-4 transition-transform group-hover:scale-110"}),s("common.edit")]})]})}),e.jsxs(d.div,{variants:c,className:"overflow-hidden rounded-xl bg-white shadow-sm dark:bg-gray-800",children:[e.jsx("div",{className:`px-8 py-4 ${L(a.status)} border-b border-gray-100 bg-opacity-10 dark:border-gray-700 dark:bg-opacity-20`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[B(a.status),e.jsx("span",{className:"font-medium",children:s(`status.${a.status}`)})]}),e.jsx("span",{className:`rounded-lg px-4 py-1.5 text-sm font-medium ${E(a.type)}`,children:s(`transaction.type.${a.type}`)})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-12 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-xl bg-gray-50 p-6 dark:bg-gray-700/30",children:[e.jsxs("h3",{className:"mb-4 flex items-center text-lg font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(u,{className:"mr-2 h-5 w-5 text-gray-500"}),s("transaction.userDetails")]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/50 flex h-12 w-12 items-center justify-center rounded-full",children:e.jsx("span",{className:"text-primary-700 dark:text-primary-300 text-lg font-medium",children:a.user.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.user.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.user.email})]})]})})]}),e.jsxs("div",{className:"rounded-xl bg-gray-50 p-6 dark:bg-gray-700/30",children:[e.jsxs("h3",{className:"mb-4 flex items-center text-lg font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(m,{className:"mr-2 h-5 w-5 text-gray-500"}),s("transaction.paymentDetails")]}),e.jsxs("div",{className:"space-y-4",children:[a.type==="bank_withdrawal"&&(a.customer_name||a.customer_surname)&&e.jsx(t,{icon:e.jsx(u,{}),label:s("withdrawal.accountHolder"),value:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[a.customer_name," ",a.customer_surname]}),a.customer_meta_id&&e.jsxs("div",{className:"text-sm text-gray-500",children:[s("withdrawal.customerMetaId"),": ",a.customer_meta_id]})]})}),e.jsx(t,{icon:e.jsx(m,{}),label:s("transaction.amount"),value:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(a.amount_usd))}),e.jsx("div",{className:"text-sm text-gray-500",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(parseFloat(a.amount))}),a.exchange_rate&&e.jsxs("div",{className:"text-xs text-gray-400",children:[s("transaction.exchangeRate"),": ",Number(a.exchange_rate).toFixed(4)]})]})}),a.type==="bank_withdrawal"?e.jsxs(e.Fragment,{children:[e.jsx(t,{icon:e.jsx(p,{}),label:s("transaction.bankAccount"),value:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:a.bank_account}),a.bank_account&&e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(a.bank_account),o.success(s("common.copied"))},className:"p-1 text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(g,{className:"h-4 w-4"})})]})}),a.bank_id&&e.jsx(t,{icon:e.jsx(p,{}),label:s("transaction.bank"),value:a.bank_id})]}):w(),e.jsx(t,{icon:e.jsx(S,{}),label:s("transaction.referenceId"),value:a.reference_id}),e.jsx(t,{icon:e.jsx(y,{}),label:s("transaction.date"),value:new Date(a.created_at).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}),a.processed_at&&e.jsx(t,{icon:e.jsx(y,{}),label:s("transaction.processedAt"),value:new Date(a.processed_at).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(d.div,{variants:c,className:"rounded-xl bg-gray-50 p-6 dark:bg-gray-700/30",children:[e.jsxs("h3",{className:"mb-4 flex items-center text-lg font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(j,{className:"mr-2 h-5 w-5 text-gray-500"}),s("transaction.history")]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute bottom-0 left-4 top-6 w-0.5 bg-gray-200 dark:bg-gray-600"}),e.jsx("div",{className:"space-y-6",children:k()})]})]}),e.jsxs(d.div,{variants:c,className:"rounded-xl bg-gray-50 p-6 dark:bg-gray-700/30",children:[e.jsxs("h3",{className:"mb-4 flex items-center text-lg font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(A,{className:"mr-2 h-5 w-5 text-gray-500"}),s("transaction.notes")]}),a.notes?e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"whitespace-pre-wrap text-gray-600 dark:text-gray-300",children:a.notes}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),s("transaction.lastUpdated"),":"," ",new Date(a.updated_at).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}):e.jsxs("div",{className:"rounded-lg bg-white p-4 text-center shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"italic text-gray-500 dark:text-gray-400",children:s("transaction.noNotes")}),e.jsxs(x,{href:route("admin.transactions.edit",a.id),className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mt-4 inline-flex items-center text-sm",children:[e.jsx(h,{className:"mr-1 h-4 w-4"}),s("transaction.addNote")]})]})]})]})]})})]})]})})})]})}const t=({icon:l,label:a,value:s})=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-gray-500 dark:bg-gray-600 dark:text-gray-400",children:l}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a}),e.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:s})]})]}),L=l=>{switch(l){case"completed":return"bg-green-500 text-green-700 dark:text-green-300";case"pending":return"bg-yellow-500 text-yellow-700 dark:text-yellow-300";case"cancelled":return"bg-gray-500 text-gray-700 dark:text-gray-300";case"rejected":return"bg-red-500 text-red-700 dark:text-red-300";default:return"bg-gray-500 text-gray-700 dark:text-gray-300"}},E=l=>{switch(l){case"bank_withdrawal":return"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300";case"crypto_withdrawal":return"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300"}},B=l=>{switch(l){case"completed":return e.jsx(M,{className:"h-5 w-5 text-green-500"});case"pending":return e.jsx(I,{className:"h-5 w-5 text-yellow-500"});case"cancelled":return e.jsx(b,{className:"h-5 w-5 text-gray-500"});case"rejected":return e.jsx(b,{className:"h-5 w-5 text-red-500"});default:return e.jsx(H,{className:"h-5 w-5 text-gray-500"})}};export{Y as default};
