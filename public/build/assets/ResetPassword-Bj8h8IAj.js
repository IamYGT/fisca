import{u as q,r as l,a as H,j as s,M as I,h as P,y as b}from"./app-CNMlmVvg.js";import{I as S}from"./InputError-0AcneiE7.js";import{A as Z}from"./AuthenticatedLayout-COLO9gVE.js";import{Z as z,B as K,W as E,U as F,e as _,w as L,V as U}from"./index-CJWvZLX-.js";import{m as d}from"./proxy-Bs2RKMmf.js";import"./ApplicationLogo-BLXO_E4I.js";import"./index-D-9bM9oj.js";import"./iconBase-Cyj80Zr6.js";import"./index-CunF7zry.js";function rs({auth:A,user:y}){const{t:e}=q(),[m,j]=l.useState(!1),[u,N]=l.useState(!1),[n,B]=l.useState(0),[h,R]=l.useState(!0),{data:r,setData:x,post:T,processing:p,errors:v}=H({password:"",password_confirmation:""}),k=l.useCallback(t=>{let a=0;return t.length>=8&&a++,t.match(/[a-z]+/)&&a++,t.match(/[A-Z]+/)&&a++,t.match(/[0-9]+/)&&a++,t.match(/[$@#&!]+/)&&a++,a},[]);l.useEffect(()=>{B(k(r.password)),R(r.password===r.password_confirmation)},[r.password,r.password_confirmation,k]);const V=()=>{const a="abcdefghijklmnopqrstuvwxyz",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",w="0123456789",g="!@#$%^&*()_+-=[]{}|;:,.<>?/~`\"'\\",f=",.!?;:";let o="";o+=a.charAt(Math.floor(Math.random()*a.length)),o+=i.charAt(Math.floor(Math.random()*i.length)),o+=w.charAt(Math.floor(Math.random()*w.length)),o+=g.charAt(Math.floor(Math.random()*g.length)),o+=f.charAt(Math.floor(Math.random()*f.length));const C=a+i+w+g+f;for(let c=o.length;c<16;c++)o+=C.charAt(Math.floor(Math.random()*C.length));o=o.split("").sort(()=>Math.random()-.5).join(""),x(c=>({...c,password:o,password_confirmation:o})),j(!0),N(!0)},$=()=>{navigator.clipboard.writeText(r.password),b.success(e("common.copied"))},D=t=>{t.preventDefault(),T(route("management.admin.users.reset-password",y.id),{onSuccess:()=>{b.success(e("users.passwordResetSuccess")),P.visit(route("management.admin.users.index"))},onError:()=>{b.error(e("users.passwordResetError"))}})},M={focus:{scale:1.02,transition:{duration:.2}},blur:{scale:1,transition:{duration:.2}}},W=()=>{const t=["#EF4444","#F59E0B","#EAB308","#84CC16","#22C55E"],a=[e("register.passwordVeryWeak"),e("register.passwordWeak"),e("register.passwordMedium"),e("register.passwordStrong"),e("register.passwordVeryStrong")];return s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"mb-1 flex",children:[0,1,2,3,4].map(i=>s.jsx(d.div,{className:"mr-1 h-2 w-1/5 rounded-full",style:{backgroundColor:i<n?t[Math.min(n-1,4)]:"#E5E7EB",transform:`scaleX(${i<n?1:.5})`}},i))}),n>0&&s.jsx("p",{className:"mt-1 text-xs",style:{color:t[Math.min(n-1,4)]},children:a[Math.min(n-1,4)]})]})};return s.jsxs(Z,{auth:A,header:s.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:e("users.resetPasswordFor").replace("{name}",y.name)}),children:[s.jsx(I,{title:e("users.resetPassword")}),s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"mx-auto max-w-2xl sm:px-6 lg:px-8",children:s.jsx("div",{className:"overflow-hidden bg-white shadow-xl dark:bg-gray-800 sm:rounded-lg",children:s.jsx("div",{className:"p-8",children:s.jsxs("form",{onSubmit:D,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("users.newPassword")}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{type:"button",onClick:V,className:"inline-flex items-center rounded bg-green-600 px-3 py-1 text-xs font-medium text-white hover:bg-green-700",children:[s.jsx(z,{className:"mr-1"}),e("users.generatePassword")]}),r.password&&s.jsxs("button",{type:"button",onClick:$,className:"inline-flex items-center rounded bg-blue-600 px-3 py-1 text-xs font-medium text-white hover:bg-blue-700",children:[s.jsx(K,{className:"mr-1"}),e("common.copy")]})]})]}),s.jsxs(d.div,{variants:M,whileFocus:"focus",className:"relative mt-1 rounded-md shadow-sm",children:[s.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:s.jsx(E,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:r.password,onChange:t=>x("password",t.target.value),className:`block w-full rounded-md border border-gray-300 py-2 pl-10 pr-10 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white ${r.password?"font-mono":""}`,required:!0}),s.jsx("button",{type:"button",onClick:()=>j(!m),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:m?s.jsx(F,{className:"h-5 w-5 text-gray-400"}):s.jsx(_,{className:"h-5 w-5 text-gray-400"})})]}),s.jsx(S,{message:v.password,className:"mt-2"}),r.password&&W()]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("users.confirmNewPassword")}),s.jsxs(d.div,{variants:M,whileFocus:"focus",className:"relative mt-1 rounded-md shadow-sm",children:[s.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:s.jsx(E,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:u?"text":"password",id:"password_confirmation",name:"password_confirmation",value:r.password_confirmation,onChange:t=>x("password_confirmation",t.target.value),className:"block w-full rounded-md border border-gray-300 py-2 pl-10 pr-10 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:!0}),s.jsx("button",{type:"button",onClick:()=>N(!u),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:u?s.jsx(F,{className:"h-5 w-5 text-gray-400"}):s.jsx(_,{className:"h-5 w-5 text-gray-400"})})]}),s.jsx(S,{message:v.password_confirmation,className:"mt-2"}),!h&&r.password_confirmation&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:e("users.passwordsDontMatch")})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(d.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>P.visit(route("management.admin.users.index")),className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:e("common.cancel")}),s.jsxs(d.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:p||!h||n<3,className:`inline-flex items-center rounded-md border border-transparent px-4 py-2 text-sm font-semibold text-white ${p||!h||n<3?"cursor-not-allowed bg-gray-400":"bg-blue-600 hover:bg-blue-700"} `,children:[p?s.jsx(L,{className:"mr-2 h-5 w-5 animate-spin"}):s.jsx(U,{className:"mr-2 h-5 w-5"}),e("users.resetPassword")]})]})]})})})})})]})}export{rs as default};
