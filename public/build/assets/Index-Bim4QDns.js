import{u as S,r as h,j as e,M as C,U as u,h as n,y as l,b as U}from"./app-CNMlmVvg.js";import{M as E}from"./Modal-Bun_T41O.js";import{A as T,i as c}from"./AuthenticatedLayout-COLO9gVE.js";import{T as D,V as f,M as F,Y as P,e as M,B as p,h as A,a as H}from"./index-CJWvZLX-.js";import{m as g}from"./proxy-Bs2RKMmf.js";import"./dialog-CE2BwF-P.js";import"./portal-CUWHgd5s.js";import"./use-server-handoff-complete-Dx_XkveX.js";import"./index-CunF7zry.js";import"./transition-Dmm_GqZM.js";import"./ApplicationLogo-BLXO_E4I.js";import"./index-D-9bM9oj.js";import"./iconBase-Cyj80Zr6.js";function W({auth:i,users:x}){const{t:s}=S(),[r,y]=h.useState(null),[w,o]=h.useState(!1);h.useEffect(()=>{const t=new URLSearchParams(window.location.search),a=t.get("showUserDetails"),d=t.get("tempPassword");if(a&&d){const j=x.find(_=>_.id===parseInt(a));j&&(y({...j,current_password:d}),o(!0))}},[x]);const b=t=>{confirm(s("common.confirmDelete"))&&n.delete(route("management.admin.users.destroy",t),{onSuccess:()=>{l.success(s("users.deleteSuccess"))}})},m=t=>{navigator.clipboard.writeText(t),l.success(s("common.copied"))},N=async t=>{try{const a=await U.post(route("management.admin.users.send-credentials",t),{user_id:t});l.success(s("users.emailSent"))}catch{l.error(s("users.emailError"))}},v=t=>{n.visit(route("management.admin.tickets.create-with-user",{user:t}))},k=t=>{n.post(route("management.admin.users.send-credentials",t),{},{onSuccess:()=>{l.success(s("users.credentialsSent")),o(!1),n.reload()},onError:()=>{l.error(s("users.credentialsError"))}})};return e.jsxs(T,{auth:{user:{id:i.user.id,name:i.user.name,email:i.user.email,roles:i.user.roles}},header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:s("users.title")}),children:[e.jsx(C,{title:s("users.title")}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm dark:bg-gray-800 sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex justify-end",children:e.jsxs(u,{href:route("management.admin.users.create"),className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[e.jsx(D,{className:"mr-2"}),s("users.create")]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:s("users.name")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:s("users.email")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:s("users.role")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:s("users.createdAt")}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:s("users.actions")})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800",children:x.map(t=>{var a,d;return e.jsxs(g.tr,{initial:{opacity:0},animate:{opacity:1},whileHover:{backgroundColor:"rgba(0,0,0,0.05)"},className:"transition-colors duration-150 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:t.email}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:((a=t.roles[0])==null?void 0:a.name.charAt(0).toUpperCase())+((d=t.roles[0])==null?void 0:d.name.slice(1))||s("users.noRole")}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(c,{content:s("users.resetPassword"),children:e.jsx(u,{href:route("management.admin.users.reset-password-form",{user:t.id}),className:"text-yellow-600 transition-colors duration-150 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",preserveScroll:!0,children:e.jsx(f,{className:"h-5 w-5"})})}),e.jsx(c,{content:s("users.edit"),children:e.jsx(u,{href:route("management.admin.users.edit",t.id),className:"text-indigo-600 transition-colors duration-150 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(F,{className:"h-5 w-5"})})}),e.jsx(c,{content:s("users.delete"),children:e.jsx("button",{onClick:()=>b(t.id),className:"text-red-600 transition-colors duration-150 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(P,{className:"h-5 w-5"})})}),e.jsx(c,{content:s("users.viewDetails"),children:e.jsx("button",{onClick:()=>{y({...t,current_password:t.current_password}),o(!0)},className:"text-blue-600 transition-colors duration-150 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(M,{className:"h-5 w-5"})})})]})})]},t.id)})})]})})]})})})}),w&&r&&e.jsx(E,{show:w,onClose:()=>o(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"mb-6 text-2xl font-bold text-gray-900 dark:text-gray-100",children:s("users.userDetails")}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-gray-50 p-4 dark:bg-gray-700/50",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:s("users.name")}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-white p-2 dark:bg-gray-800",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:r.name}),e.jsx("button",{onClick:()=>m(r.name),className:"ml-2 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700",children:e.jsx(p,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:s("users.email")}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-white p-2 dark:bg-gray-800",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:r.email}),e.jsx("button",{onClick:()=>m(r.email),className:"ml-2 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700",children:e.jsx(p,{className:"h-4 w-4"})})]})]})]})}),e.jsx("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-900/50 dark:bg-yellow-900/20",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:s("users.currentPassword")}),!r.has_encrypted_password&&e.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:s("users.noStoredPassword")})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-white p-2 dark:bg-gray-800",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono",children:r.current_password||s("users.notAvailable")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r.current_password&&e.jsx("button",{onClick:()=>r.current_password&&m(r.current_password),className:"ml-2 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700",title:s("common.copy"),children:e.jsx(p,{className:"h-4 w-4"})}),!r.current_password&&r.id&&e.jsx("button",{onClick:()=>k(r.id),className:"ml-2 rounded-full p-1 text-yellow-400 hover:bg-yellow-100 hover:text-yellow-600 dark:hover:bg-yellow-700",title:s("users.generateNewPassword"),children:e.jsx(f,{className:"h-4 w-4"})})]})]}),r.password_updated_at&&e.jsxs("p",{className:"mt-1 text-xs text-yellow-600 dark:text-yellow-400",children:[s("users.lastUpdated"),":"," ",new Date(r.password_updated_at).toLocaleString()]}),e.jsx("div",{className:"mt-2 text-xs text-yellow-600 dark:text-yellow-400",children:e.jsx("p",{children:s("users.passwordNote")})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N(r.id),className:"inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),s("users.sendEmail")]}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v(r.id),className:"inline-flex items-center rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),s("users.createTicket")]})]})]})]})})]})}export{W as default};
