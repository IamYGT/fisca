import{u as A,r as i,W as V,j as s,Y as W}from"./app-Cka1RFMC.js";import{W as j,U as v,e as N,w as q,j as B}from"./index-BDflAi9i.js";import{G as D}from"./GuestLayout-DJNkxD7v.js";import{I as g}from"./InputError-Dpua6KD3.js";import{m as o}from"./proxy-Bs9MHras.js";import{A as H}from"./index-Bay4iaGb.js";import"./iconBase-DgqZiK0E.js";import"./ApplicationLogo-CDlIPLAK.js";function L({token:c,email:m,languages:k,secili_dil:P}){const{t:a}=A(),[p,S]=i.useState(!1),[u,C]=i.useState(!1),[n,b]=i.useState(0),[h,F]=i.useState(!0),{data:r,setData:d,post:E,processing:w,errors:x,reset:O}=V({token:c,email:m,password:"",password_confirmation:""}),T=async e=>{var t;if(e.preventDefault(),r.password)try{if(!(await fetch(route("admin.users.store-password"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({password:r.password,email:r.email})})).ok)throw new Error("Password storage failed")}catch(l){console.error("Password storage error:",l)}E(route("password.store"),{preserveState:!0})},y={focus:{scale:1.02,boxShadow:'0px 0px 8px theme("colors.light.primary")',transition:{duration:.2}},blur:{scale:1,boxShadow:"none",transition:{duration:.2}},tap:{scale:.98,transition:{duration:.1}}},_={idle:{scale:1},hover:{scale:1.05},tap:{scale:.95}},f=i.useCallback(e=>{let t=0;return e.length>=8&&t++,e.match(/[a-z]+/)&&t++,e.match(/[A-Z]+/)&&t++,e.match(/[0-9]+/)&&t++,e.match(/[$@#&!]+/)&&t++,t},[]);i.useEffect(()=>{b(f(r.password)),F(r.password===r.password_confirmation)},[r.password,r.password_confirmation,f]),i.useEffect(()=>{d("email",m),d("token",c)},[m,c]);const M=()=>{const e=["#EF4444","#F59E0B","#EAB308","#84CC16","#22C55E"],t=[a("resetPassword.passwordVeryWeak"),a("resetPassword.passwordWeak"),a("resetPassword.passwordMedium"),a("resetPassword.passwordStrong"),a("resetPassword.passwordVeryStrong")];return s.jsxs(o.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-2",children:[s.jsx("div",{className:"flex mb-1",children:[0,1,2,3,4].map(l=>s.jsx(o.div,{className:"h-2 w-1/5 mr-1 rounded-full",initial:{scaleX:0},animate:{scaleX:n>l?1:0,backgroundColor:e[Math.min(n-1,4)]},transition:{duration:.2,delay:l*.05}},l))}),s.jsx(o.p,{className:"text-xs mt-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},style:{color:e[Math.min(n-1,4)]},children:t[Math.min(n-1,4)]})]})};return s.jsxs(D,{languages:k,secili_dil:P,children:[s.jsx(W,{title:a("resetPassword.title")}),s.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-2xl rounded-3xl overflow-hidden backdrop-filter backdrop-blur-lg bg-opacity-30 dark:bg-opacity-30 border border-gray-200 dark:border-gray-700 border-opacity-20",children:s.jsxs("div",{className:"p-8 sm:p-10",children:[s.jsx(H,{children:s.jsx(o.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.5},className:"text-3xl font-extrabold text-gray-900 dark:text-white mb-6 text-center",children:a("resetPassword.title")},"reset-password-text")}),s.jsxs("form",{onSubmit:T,className:"space-y-6",children:[s.jsxs(o.div,{variants:y,initial:"blur",whileFocus:"focus",whileTap:"tap",animate:"blur",children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("resetPassword.email")}),s.jsx("input",{id:"email",type:"email",name:"email",value:r.email,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-light-primary focus:border-light-primary sm:text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",onChange:e=>d("email",e.target.value),disabled:!0}),s.jsx(g,{message:x.email,className:"mt-2"})]}),s.jsxs(o.div,{variants:y,initial:"blur",whileFocus:"focus",whileTap:"tap",animate:"blur",children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("resetPassword.password")}),s.jsxs("div",{className:"relative rounded-md shadow-sm",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(j,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),s.jsx("input",{id:"password",type:p?"text":"password",name:"password",value:r.password,onChange:e=>{d("password",e.target.value),b(f(e.target.value))},className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-light-primary focus:border-light-primary sm:text-sm",placeholder:a("resetPassword.passwordPlaceholder"),required:!0}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>S(!p),className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200 dark:focus:text-gray-200",children:p?s.jsx(v,{className:"h-5 w-5"}):s.jsx(N,{className:"h-5 w-5"})})})]}),s.jsx(g,{message:x.password,className:"mt-2"}),r.password&&M()]}),s.jsxs(o.div,{variants:y,initial:"blur",whileFocus:"focus",whileTap:"tap",animate:"blur",children:[s.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("resetPassword.confirmPassword")}),s.jsxs("div",{className:"relative rounded-md shadow-sm",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(j,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),s.jsx("input",{id:"password_confirmation",type:u?"text":"password",name:"password_confirmation",value:r.password_confirmation,onChange:e=>d("password_confirmation",e.target.value),className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-light-primary focus:border-light-primary sm:text-sm",placeholder:a("resetPassword.confirmPasswordPlaceholder"),required:!0}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>C(!u),className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200 dark:focus:text-gray-200",children:u?s.jsx(v,{className:"h-5 w-5"}):s.jsx(N,{className:"h-5 w-5"})})})]}),s.jsx(g,{message:x.password_confirmation,className:"mt-2"}),!h&&r.password_confirmation&&s.jsx("p",{className:"text-xs mt-1 text-red-500",children:a("resetPassword.passwordsDontMatch")})]}),s.jsx("div",{children:s.jsxs(o.button,{variants:_,initial:"idle",whileHover:"hover",whileTap:"tap",type:"submit",disabled:w||n<3||!h,className:`
                                        w-full flex justify-center items-center py-3 px-4
                                        border border-transparent rounded-md shadow-sm text-sm font-medium text-white
                                        focus:outline-none focus:ring-2 focus:ring-offset-2
                                        ${w||n<3||!h?"bg-gray-400 cursor-not-allowed":"bg-light-primary hover:bg-blue-700 focus:ring-blue-500"}
                                    `,children:[w?s.jsx(q,{className:"h-5 w-5 mr-3 animate-spin"}):s.jsx(B,{className:"h-5 w-5 mr-3"}),a("resetPassword.resetPassword")]})})]})]})})})]})}export{L as default};
